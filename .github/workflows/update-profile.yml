name: Update Profile README

on:
  schedule:
    # Runs every 6 hours
    - cron: '0 */6 * * *'
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  update-readme:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Get current time
      id: time
      run: echo "time=$(date -u '+%Y-%m-%d %H:%M UTC')" >> $GITHUB_OUTPUT
      
    - name: Get recent commits
      id: commits
      run: |
        # Get recent commits from all repos
        COMMITS=$(curl -s "https://api.github.com/users/joemocha/events?per_page=10" | \
          jq -r '.[] | select(.type == "PushEvent") | "- üî® **\(.repo.name)**: \(.payload.commits[0].message // "Updated code")"' | \
          head -5)
        echo "commits<<EOF" >> $GITHUB_OUTPUT
        echo "$COMMITS" >> $GITHUB_OUTPUT
        echo "EOF" >> $GITHUB_OUTPUT
        
    - name: Update README with dynamic content
      run: |
        # Create updated README with dynamic sections
        cat > README_TEMP.md << 'EOL'
        <div align="center">
          <h1>ü§ñ AI-Powered Software Engineer</h1>
          <h3>Leveraging AI Agents for Parallel Feature Development</h3>
          
          ![Typing SVG](https://readme-typing-svg.herokuapp.com?font=Fira+Code&pause=1000&color=00D4FF&center=true&vCenter=true&width=500&lines=Software+Engineer+%2B+AI+Enthusiast;Parallel+Development+with+AI+Agents;Breaking+Stories+into+Atomic+Pieces;Building+the+Future%2C+One+Agent+at+a+Time)
        </div>

        ---

        ## üöÄ About Me
        I'm a software engineer who **leverages AI to the hilt** by using AI agents to develop features in parallel. My approach: break user stories into small atomic pieces and deploy AI agents to work on them simultaneously, dramatically accelerating development velocity.

        **My AI-Powered Development Philosophy:**
        - ü§ñ **AI Agent Orchestration**: Deploy multiple AI agents to work on different features simultaneously
        - ‚öõÔ∏è **Atomic Feature Decomposition**: Break complex user stories into the smallest possible, independent pieces
        - üöÄ **Parallel Development**: Maximize throughput by running development streams in parallel
        - üîÑ **Continuous Integration**: Seamlessly merge AI-generated code with human oversight

        **Current Focus:**
        - üå± Perfecting AI agent workflows for maximum development efficiency  
        - üíûÔ∏è Building tools that enhance AI-human collaboration in software development
        - üéØ Exploring the cutting edge of AI-assisted programming

        ## üõ†Ô∏è Tech Stack & AI Arsenal

        ### ü§ñ AI Development Tools
        ![Claude](https://img.shields.io/badge/Claude-FF6B35?style=for-the-badge&logo=anthropic&logoColor=white)
        ![ChatGPT](https://img.shields.io/badge/ChatGPT-00A67E?style=for-the-badge&logo=openai&logoColor=white)
        ![GitHub Copilot](https://img.shields.io/badge/GitHub%20Copilot-000000?style=for-the-badge&logo=github&logoColor=white)
        ![Cursor](https://img.shields.io/badge/Cursor-000000?style=for-the-badge&logo=cursor&logoColor=white)

        ### üíª Core Technologies
        ![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)
        ![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
        ![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)
        ![Ruby](https://img.shields.io/badge/Ruby-CC342D?style=for-the-badge&logo=ruby&logoColor=white)
        ![Go](https://img.shields.io/badge/Go-00ADD8?style=for-the-badge&logo=go&logoColor=white)

        ### üé® Frontend & UI
        ![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
        ![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
        ![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
        ![TailwindCSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)

        ### ‚ö° Backend & Infrastructure
        ![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white)
        ![Ruby on Rails](https://img.shields.io/badge/Ruby_on_Rails-CC0000?style=for-the-badge&logo=ruby-on-rails&logoColor=white)
        ![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)
        ![MongoDB](https://img.shields.io/badge/MongoDB-4EA94B?style=for-the-badge&logo=mongodb&logoColor=white)
        ![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)

        ### ‚òÅÔ∏è Cloud & DevOps
        ![AWS](https://img.shields.io/badge/Amazon_AWS-232F3E?style=for-the-badge&logo=amazon-aws&logoColor=white)
        ![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
        ![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
        ![VS Code](https://img.shields.io/badge/VS_Code-007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white)

        ## üìà My AI-Driven Development Methodology

        ```mermaid
        graph LR
            A[User Story] --> B[Atomic Decomposition]
            B --> C[AI Agent 1]
            B --> D[AI Agent 2] 
            B --> E[AI Agent N]
            C --> F[Parallel Development]
            D --> F
            E --> F
            F --> G[Integration & Review]
            G --> H[Deployment]
        ```

        **The Process:**
        1. **üéØ Story Analysis**: Break down complex features into atomic, independent pieces
        2. **ü§ñ Agent Deployment**: Assign specialized AI agents to different components
        3. **‚ö° Parallel Execution**: Run multiple development streams simultaneously
        4. **üîó Smart Integration**: Merge AI-generated code with human oversight
        5. **üöÄ Rapid Iteration**: Deploy faster than traditional sequential development

        ## üîÑ Recent Activity
        
        > Last updated: ${{ steps.time.outputs.time }}

        ${{ steps.commits.outputs.commits }}

        ## üì´ Let's Connect & Collaborate
        <div align="center">
          
        [![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/sobu/)
        [![Twitter](https://img.shields.io/badge/Twitter-1DA1F2?style=for-the-badge&logo=twitter&logoColor=white)](https://twitter.com/joemocha)

        </div>

        ---

        <div align="center">
          <i>ü§ñ Building the future with AI agents, one atomic feature at a time</i><br>
          ‚≠êÔ∏è From [joemocha](https://github.com/joemocha)
        </div>
        EOL
        
        # Replace README if content changed
        if ! cmp -s README.md README_TEMP.md; then
          cp README_TEMP.md README.md
          echo "README updated"
        else
          echo "No changes needed"
        fi
        rm README_TEMP.md
        
    - name: Commit and push if changed
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add README.md
        if git diff --staged --quiet; then
          echo "No changes to commit"
        else
          git commit -m "ü§ñ Auto-update profile with recent activity

          - Updated recent activity section with latest commits
          - Refreshed last updated timestamp
          - Automated via GitHub Actions

          ü§ñ Generated with GitHub Actions"
          git push
        fi